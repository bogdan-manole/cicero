{{template "_layout.html" .}}

{{define "main"}}
{{$scope := "d2dc0bac8e4747b39b78a49cf274328a"}}
<div id="{{$scope}}">
	<h1>{{.Name}}</h1>

	<h2>Actions</h2>
	<ul>
		<li><a href="/workflow/{{.Name | pathEscape}}/start">Start</a></li>
	</ul>

	<iframe src="/workflow/{{.Name | pathEscape}}/graph?instance={{.instance}}">
		- [x] https://github.com/go-echarts/go-echarts
		- [ ] https://github.com/goccy/go-graphviz
	</iframe>

	<h2>Instances</h2>
	<table class="table">
		<tr>
			<th>ID</th>
			<th>Name</th>
			<th>Created At</th>
			<th>Updated At</th>
			<th>Certificates</th>
		</tr>
		{{range .Instances}}
		<tr>
			<td><a href="?instance={{.ID}}">{{.ID}}</a></td>
			<td>{{.Name}}</td>
			<td>{{.CreatedAt}}</td>
			<td>{{.UpdatedAt}}</td>
			<td><pre>{{.Certs | toJson}}</pre></td>
		</tr>
		{{end}}
	</table>
</div>

<style>
#{{$scope}} {
	height: 100%;

	display: flex;
	flex-direction: column;
}

#{{$scope}} > iframe {
	flex-grow: 1;
	border: none;
}
</style>
{{end}}
