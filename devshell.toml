imports = [
  "language.go"
]

[[env]]
name = "DATABASE_URL"
value = "sqlite:db/database.sqlite3"

[[commands]]
package = "go"

[[commands]]
package = "dbmate"

[[commands]]
package = "golangci-lint"

[[commands]]
package = "liftbridge-cli"

[[commands]]
package = "liftbridge"

[[commands]]
package = "foreman"

[[commands]]
package = "gouml"

[[commands]]
package = "nomad"

[[commands]]
package = "damon"

[[commands]]
name = "lint"
command = "gocritic check -enableAll ./... && fd -e nix -X nixfmt -c"
help = "Run code linters"

[[commands]]
name = "docs"
command = "swagger generate spec -o swagger.yaml --scan-models"
help = "Generate API documentation"

[[commands]]
name = "docs-serve"
command = "docs && swagger serve --no-open -F=swagger swagger.yaml"
help = "Generate and serve API documentation"

[[commands]]
name = "wfs"
command = "cicero-evaluator-nix \"${1:-}\" ./workflows"
help = "Workflow Evaluator (Nix) (wrapper that reads ./workflows)"

[devshell]
name = "cicero"
packages = [
  "diffutils",
  "go",
  "goimports",
  "gopls",
  "gocode",
  "gcc",
  "sqliteInteractive",
  "gocritic",
  "fd",
  "nixfmt",
  "go-swagger",
  "grafana-loki",
  "cicero-evaluator-nix",
]
